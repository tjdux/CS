- 메시지를 주고받고자 하는 대상을 파악: IP 주소, 도메인 네임
- 송수신하고자 하는 정보를 식별: URI
## 도메인 네임과 네임 서버
### 도메인 네임과 서버
- IP 주소만으로 호스트를 특정하기 어려움: IP 주소를 기억하기 어려움, IP 주소는 바뀔 수 있음
- 도메인 네임 (domain name)
  - 호스트의 IP 주소와 대응되는 문자열 형태의 호스트 특정 정보
  - 상대 호스트를 식별하기 위해 IP 주소보다는 도메인 네임을 많이 사용
  - IP 주소에 비해 기억하기 쉽고, IP 주소만으로 호스트를 특정하는 것보다 더 간편 
- 네임 서버 (name server, DNS 서버)
  - 도메인 네임과 IP 주소 관리
  - 도메인 네임을 네임 서버에 질의하면 해당 도메인 네임에 대한 IP 주소를 알려주는 방식
- host 파일
  - 도메인 네임과 IP 주소의 대응 관계를 담은 파일
  - 호스트마다 개별적으로 보유
### 도메인 네임의 구조
![스크린샷 2025-04-09 210826](https://github.com/user-attachments/assets/af94f802-459f-4d00-bd68-4ab761e35fb3)
`www.example.com`
- 도메인 네임은 점(.)을 기준으로 계층적으로 분류
- 루트 도메인 (root domain)
  - 도메인의 최상단 (.)
  - 점 (.)으로 표현되며 도메인 네임의 마지막에 점이 찍힌 형태로 표기
- 최상위 도메인 (TLD; Top-Level Domain)
  - 루트 도메인의 다음 단계 (위의 예에서는 com)
- 2단계 도메인 (second-level domain)
  - 최상위 도메인의 다음 단계 (위의 예에서는 example)
- www: 3단계 도메인 (3rd-level domain) 
- 일반적으로 3 ~ 5단계
- 전체 주소 도메인 네임 (FQDN; Fully-Qualified Domain Name): 도메인 네임 모두를 표현하는 도메인 네임 (www.example.com) 
- 호스트 네임 (host name)
  - FQDN의 첫 번째 부분 (www)
  - 때로는 FQDN 자체를 가리키기도 함
### 도메인 네임 시스템 (DNS)
- **도메인 네임 구조처럼 네임 서버도 계층적인 형태**
- **네임 서버는 여러 개 존재하며 전 세계 여러 군데에 위치**
- 도메인 네임 시스템 (DNS; Domain Name System)
  - 계층적이고, 분산된 도메인 네임에 대한 관리 체계
  - 호스트가 이러한 도메인 네임 시스템을 이용할 수 있도록 하는 애플리케이션 계층 프로토콜을 의미하기도 함
<br/>

## 계층적 네임 서버
- '도메인 네임을 풀이한다', '리졸빙(resolving)한다': IP 주소를 모르는 상태에서 도메인 네임에 대응되는 IP 주소를 알아내는 과정
### 네임 서버의 유형
- 로컬 네임 서버 (local name server)
  - 클라이언트와 맞닿아 있는 네임 서버
  - 가장 먼저 찾게 되는 네임 서버
  - 일반적으로 ISP (인터넷 서비스 업체)에서 할당
  - 공개 DNS 서버 (public DNS Server)도 존재
- 루트 네임 서버 (root name server)
  - 로컬 네임 서버가 대응되는 IP 주소를 모른다면 로컬 네임 서버가 루트 네임 서버에게 질의
  - 루트 도메인을 관장하는 네임 서버
  - 질의에 대해 TLD 네임 서버의 IP 주소를 반환
- TLD 네임 서버 (TLD name server)
  - TLD를 관리하는 네임 서버
  - TLD의 하위 도메인 네임을 관리하는 네임 서버 주소를 반환
- 책임 네임 서버 (authoritative name server)
  - 특정 도메인 영역을 관리하는 네임 서버
  - 자신이 관리하는 도메인 영역의 질의에 대해서는 다른 네임 서버에게 넘기지 않고 곧바로 답할 수 있는 네임 서버
  - 로컬 네임 서버가 마지막으로 질의하는 네임 서버
  - 일반적으로 로컬 네임 서버는 책임 네임 서버로부터 원하는 IP 주소를 얻어냄
### 로컬 네임 서버가 네임 서버들에게 질의하는 방법
- 재귀적 질의 (recursive query)
  ![스크린샷 2025-04-09 211532](https://github.com/user-attachments/assets/8147d6fe-d3a4-47a6-b43a-aaf9a4d7d1f8)
  - 클라이언트 ➡️ 로컬 네임 서버 ➡️ 루트 네임 서버 ➡️ TLD 네임 서버 ➡️ ... ➡️ 책임 네임 서버 순으로 질의
  - 최종 응답 결과를 역순으로 전달 받음
- 반복적 질의 (iterative query)
  ![스크린샷 2025-04-09 211740](https://github.com/user-attachments/assets/d389afaa-43c7-4914-b82b-465191ed4e8f)
  - 클라이언트 ➡️ 로컬 네임 서버 ↔️ 루트 네임 서버, TLD 네임 서버, 책임 네임 서버
### DNS 캐시
- 도메인 네임 리졸빙 과정의 문제: 시간이 오래 걸리고 네트워크상의 메시지 수가 지나치게 늘어날 수 있음
- DNS 캐시 (DNS cache): 네임 서버들이 기존에 응답받은 결과를 임시로 저장했다가 추후 같은 질의에 이를 활용
- DNS 캐시만을 위한 서버도 존재
- 더 짧은 시간 안에 원하는 IP 주소를 얻을 수 있음
- DNS 캐시는 TTL (캐시될 수 있는 시간)과 함께 저장되어 영원히 남아있는 것은 아님
<br/>

## URI
- 자원 (resource)
  - 네트워크상의 메시지를 통해 주고받는 대상
  - 두 호스트가 네트워크를 통해 서로 정보를 주고받을 때, 송수신하는 대상
  - HTTP 요청 메시지의 대상
- URI (Uniform Resource Identifier)
  - 자원을 식별할 수 있는 정보
  - URL (Uniform Resource Locator): 위치를 통해 자원을 식별
  - URN (Uniform Resource Name): 이름을 이용해 자원을 식별
### URL
- URN보다 더 많이 사용됨
- 위치 기반 식별자
![스크린샷 2025-04-09 212240](https://github.com/user-attachments/assets/2fedbb09-d3b2-4189-a365-b7f0791f7eb9)
- scheme
  - 자원에 접근하는 방법
  - 일반적으로 사용할 프로토콜이 명시
- authority
  - 호스트를 특정할 수 있는 정보
  - IP 주소 또는 도메인 네임
  - 콜론(:)뒤에 포트 번호를 덧붙일 수 있음
- path
  - 자원이 위치한 경로
  - 슬래시(/)를 기준으로 계층적으로 표현
  - 최상위 경로 또한 슬래시로 표현
- query
  - 쿼리 문자열 (query string) 또는 쿼리 파라미터 (query parameter): path까지 뿐만 아니라 더 많은 정보가 필요할 때 사용
  - 물음표로 시작되는 키=값 형태
  - &를 사용하여 여러 쿼리 문자열을 연결
  - 서버를 개발하는 개발자가 설계하기 나름
  - 쿼리 문자열을 이용해 서버와 더 다양하게 상호 작용 가능
- fragment
  - 자원의 한 조각을 가리키기 위한 정보
  - 흔히 HTML 파일과 같은 자원에서 특정 부분을 가리키기 위해 사용
### URN
- URL의 단점: 자원의 위치가 변경되면 기존 URL로는 자원 식별 불가
- URN
  - 자원에 고유한 이름을 붙이는 이름 기반 식별자
  - 장점: 자원의 위치나 프로토콜과 무관하게 자원을 식별
- URL을 훨씬 더 많이 사용
